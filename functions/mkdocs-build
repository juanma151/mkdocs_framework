# vim: filetype=zsh: tabstop=3: shiftwidth=3: noexpandtab:

mkpr-init__ || return 100

local sitepth prjpth

check_project__

prjpth=$( path__ project )
sitepth=$( path__ project site )


## Build
(
	cd "${prjpth}/.data/paths/mkdocs-prj"

	mkdocs-shell --command bash -c \
		"mkdocs-pdf build --site-dir ${(qq)sitepth}"
) ||
	err__ "Error running the nix shell"


## Get the pdf
mv "${sitepth}/assets/pdf"/*.pdf "${prjpth}"/ 2> /dev/null || true
rm -rf "${sitepth}/assets/pdf"
